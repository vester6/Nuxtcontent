import{u as C}from"./BBo1VucV.js";import{l as I,J as N,K as F,f as n,g as y,N as a,k as d,i as e,F as x,H as k,O as S,t as l,x as M,h as O,R as V}from"./CWGTzWJ1.js";import"./C8KQI0pk.js";import"./DzKFDTx-.js";const A={key:0,class:"related-recipes"},B={class:"related-grid"},U=["href"],j={class:"time-badge"},q={key:0,class:"category-badge"},z={class:"recipe-card-content"},D={class:"description"},L={class:"recipe-meta"},P={class:"difficulty"},E={class:"servings"},G={__name:"RelatedRecipes",props:{currentRecipe:{type:Object,required:!0},currentSlug:{type:String,required:!0}},async setup(b){let h,v;const o=b,{data:f}=([h,v]=N(()=>C("/api/recipes","$YTe4cnvzd6")),h=await h,v(),h),r=F(()=>{if(!f.value||!o.currentRecipe)return[];if(!o.currentRecipe.categories||o.currentRecipe.categories.length===0)return f.value.filter(t=>t.slug!==o.currentSlug).sort(()=>.5-Math.random()).slice(0,3);const s=f.value.filter(t=>t.slug===o.currentSlug||!t.categories||t.categories.length===0?!1:t.categories.some(g=>o.currentRecipe.categories.includes(g)));if(s.length>=3)return s.slice(0,3);const c=3-s.length,i=f.value.filter(t=>t.slug!==o.currentSlug&&!s.some(g=>g.slug===t.slug)).sort(()=>.5-Math.random()).slice(0,c);return[...s,...i]}),_=s=>{if(s.image)return{backgroundImage:`url(${s.image})`};let c="category-default";if(s.categories&&s.categories.length>0){const i=s.categories[0].toLowerCase();i.includes("dessert")?c="category-dessert":i.includes("bagv√¶rk")?c="category-bagvaerk":i.includes("tradition")?c="category-tradition":i.includes("international")&&(c="category-international")}return{backgroundColor:w(c)}},w=s=>{switch(s){case"category-dessert":return"#f9d5e5";case"category-bagvaerk":return"#eeac99";case"category-tradition":return"#e06377";case"category-international":return"#5b9aa0";default:return"#d8e2dc"}};return(s,c)=>a(r)&&a(r).length>0?(d(),n("div",A,[c[0]||(c[0]=e("h2",{class:"related-title"},"Andre opskrifter du m√•ske vil synes om",-1)),e("div",B,[(d(!0),n(x,null,k(a(r),i=>(d(),n("div",{key:i.slug,class:"related-grid-item"},[e("a",{href:i.slug,class:"recipe-card",onclick:"window.location.href=this.getAttribute('href'); return false;"},[e("div",{class:"recipe-card-image",style:S(_(i))},[e("div",j,l(i.time||"30")+" min",1),i.categories&&i.categories.length>0?(d(),n("div",q,l(i.categories[0]),1)):y("",!0)],4),e("div",z,[e("h3",null,l(i.title),1),e("p",D,l(i.description),1),e("div",L,[e("span",P,l(i.difficulty||"Nem"),1),e("span",E,l(i.servings||"4")+" pers.",1)])])],8,U)]))),128))])])):y("",!0)}},H=I(G,[["__scopeId","data-v-8381c215"]]),J={key:0,class:"loading-container"},K={key:1,class:"error-container"},Y={key:2,class:"recipe-page"},Z={class:"recipe-header"},Q={class:"recipe-header-content"},W={class:"recipe-description"},X={class:"recipe-meta"},ee={class:"meta-item"},te={class:"meta-item"},ie={class:"meta-item"},re={class:"recipe-content"},ae={class:"recipe-columns"},se={class:"recipe-ingredients"},ce={class:"recipe-instructions"},le={key:0,class:"recipe-tips"},ne={__name:"[name]",async setup(b){let h,v;const o=M(),f=o.params.name;console.log("Opskriftsside indl√¶st med params:",o.params);const{data:r,pending:_,error:w}=([h,v]=N(()=>C(`/api/recipe?name=${encodeURIComponent(f)}`,"$15ACNZNMrv")),h=await h,v(),h);console.log("API-svar modtaget:",r.value);const s=()=>r.value&&r.value.image?r.value.image:"https://upload.wikimedia.org/wikipedia/commons/6/6d/Good_Food_Display_-_NCI_Visuals_Online.jpg",c=()=>{if(!r.value||!r.value.body)return{ingredients:[],instructions:[]};const i=r.value.body,t=i.match(/Ingredienser(.*?)(?=Fremgangsm√•de|$)/s),g=i.match(/Fremgangsm√•de(.*?)(?=Tips|$)/s),u=i.match(/Tips(.*?)$/s);let m=[];t&&t[1]&&(m=t[1].trim().replace(/###|##|#/g,"").replace(/\*/g,"").trim().split(/\n|(?:-\s)/).filter(p=>p.trim().length>0).map(p=>p.trim().replace(/^-\s*/,"")));let $=[];g&&g[1]&&($=g[1].trim().replace(/###|##|#/g,"").replace(/\*\*/g,"").trim().split(/\d+\.\s+/).filter(p=>p.trim().length>0).map(p=>p.trim()));let R="";return u&&u[1]&&(R=u[1].trim().replace(/###|##|#/g,"").replace(/\*\*/g,"").trim()),{ingredients:m,instructions:$,tips:R}};return(i,t)=>{const g=H;return d(),n("div",null,[a(_)?(d(),n("div",J,t[0]||(t[0]=[e("div",{class:"loader"},null,-1),e("p",null,"Indl√¶ser opskrift...",-1)]))):a(w)||a(r)&&a(r).error?(d(),n("div",K,[t[1]||(t[1]=e("h2",null,"Opskrift ikke fundet",-1)),e("p",null,'Vi kunne ikke finde opskriften "'+l(a(f))+'". Pr√∏v at v√¶lge en anden opskrift.',1),t[2]||(t[2]=e("a",{href:"/",class:"back-link"},"Tilbage til forsiden",-1))])):a(r)&&!a(r).error?(d(),n("div",Y,[e("div",Z,[e("div",{class:"recipe-image",style:S({backgroundImage:`url(${s()})`})},t[3]||(t[3]=[V('<div class="pattern-overlay" data-v-49ca3e36><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" data-v-49ca3e36><defs data-v-49ca3e36><pattern id="recipe-checkerboard" x="0" y="0" width="120" height="120" patternUnits="userSpaceOnUse" data-v-49ca3e36><rect width="20" height="20" x="0" y="0" fill="#c62828" data-v-49ca3e36></rect><rect width="20" height="20" x="20" y="0" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="40" y="0" fill="#c62828" data-v-49ca3e36></rect><rect width="20" height="20" x="60" y="0" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="80" y="0" fill="#c62828" data-v-49ca3e36></rect><rect width="20" height="20" x="100" y="0" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="0" y="20" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="20" y="20" fill="#ffffff" data-v-49ca3e36></rect><rect width="20" height="20" x="40" y="20" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="60" y="20" fill="#ffffff" data-v-49ca3e36></rect><rect width="20" height="20" x="80" y="20" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="100" y="20" fill="#ffffff" data-v-49ca3e36></rect><rect width="20" height="20" x="0" y="40" fill="#c62828" data-v-49ca3e36></rect><rect width="20" height="20" x="20" y="40" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="40" y="40" fill="#c62828" data-v-49ca3e36></rect><rect width="20" height="20" x="60" y="40" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="80" y="40" fill="#c62828" data-v-49ca3e36></rect><rect width="20" height="20" x="100" y="40" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="0" y="60" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="20" y="60" fill="#ffffff" data-v-49ca3e36></rect><rect width="20" height="20" x="40" y="60" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="60" y="60" fill="#ffffff" data-v-49ca3e36></rect><rect width="20" height="20" x="80" y="60" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="100" y="60" fill="#ffffff" data-v-49ca3e36></rect><rect width="20" height="20" x="0" y="80" fill="#c62828" data-v-49ca3e36></rect><rect width="20" height="20" x="20" y="80" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="40" y="80" fill="#c62828" data-v-49ca3e36></rect><rect width="20" height="20" x="60" y="80" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="80" y="80" fill="#c62828" data-v-49ca3e36></rect><rect width="20" height="20" x="100" y="80" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="0" y="100" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="20" y="100" fill="#ffffff" data-v-49ca3e36></rect><rect width="20" height="20" x="40" y="100" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="60" y="100" fill="#ffffff" data-v-49ca3e36></rect><rect width="20" height="20" x="80" y="100" fill="#e57373" data-v-49ca3e36></rect><rect width="20" height="20" x="100" y="100" fill="#ffffff" data-v-49ca3e36></rect></pattern></defs><rect width="100%" height="100%" fill="url(#recipe-checkerboard)" data-v-49ca3e36></rect></svg></div>',1)]),4),e("div",Q,[e("h1",null,l(a(r).title),1),e("p",W,l(a(r).description),1),e("div",X,[e("div",ee,[t[4]||(t[4]=e("span",{class:"meta-icon"},"‚è±Ô∏è",-1)),e("span",null,l(a(r).time||30)+" minutter",1)]),e("div",te,[t[5]||(t[5]=e("span",{class:"meta-icon"},"üë®‚Äçüç≥",-1)),e("span",null,l(a(r).difficulty||"Nem"),1)]),e("div",ie,[t[6]||(t[6]=e("span",{class:"meta-icon"},"üçΩÔ∏è",-1)),e("span",null,l(a(r).servings||4)+" personer",1)])])])]),e("div",re,[e("div",ae,[e("div",se,[t[7]||(t[7]=e("h2",null,"Ingredienser",-1)),e("ul",null,[(d(!0),n(x,null,k(c().ingredients,(u,m)=>(d(),n("li",{key:m},l(u),1))),128))])]),e("div",ce,[t[9]||(t[9]=e("h2",null,"Fremgangsm√•de",-1)),e("ol",null,[(d(!0),n(x,null,k(c().instructions,(u,m)=>(d(),n("li",{key:m},l(u),1))),128))]),c().tips?(d(),n("div",le,[t[8]||(t[8]=e("h3",null,"Tips",-1)),e("p",null,l(c().tips),1)])):y("",!0)])])]),O(g,{"current-recipe":a(r),"current-slug":`/opskrifter/${a(f)}`},null,8,["current-recipe","current-slug"]),t[10]||(t[10]=e("div",{class:"button-container"},[e("a",{href:"/",class:"back-button"},"Tilbage til forsiden")],-1))])):y("",!0)])}}},fe=I(ne,[["__scopeId","data-v-49ca3e36"]]);export{fe as default};
