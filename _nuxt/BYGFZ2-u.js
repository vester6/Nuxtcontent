import{u as C}from"./C5aerB6Q.js";import{l as I,J as N,K as F,f as c,g as y,N as a,k as d,i as e,F as w,H as x,O as S,t as n,x as M,h as O,U as V}from"./BEhPD5dd.js";import"./B6u1AKxV.js";import"./B_kigFpv.js";const A={key:0,class:"related-recipes"},B={class:"related-grid"},U=["href"],j={class:"time-badge"},q={key:0,class:"category-badge"},z={class:"recipe-card-content"},D={class:"description"},L={class:"recipe-meta"},P={class:"difficulty"},E={class:"servings"},G={__name:"RelatedRecipes",props:{currentRecipe:{type:Object,required:!0},currentSlug:{type:String,required:!0}},async setup(k){let g,v;const o=k,{data:f}=([g,v]=N(()=>C("/api/recipes","$YTe4cnvzd6")),g=await g,v(),g),i=F(()=>{if(!f.value||!o.currentRecipe)return[];if(!o.currentRecipe.categories||o.currentRecipe.categories.length===0)return f.value.filter(t=>t.slug!==o.currentSlug).sort(()=>.5-Math.random()).slice(0,3);const s=f.value.filter(t=>t.slug===o.currentSlug||!t.categories||t.categories.length===0?!1:t.categories.some(h=>o.currentRecipe.categories.includes(h)));if(s.length>=3)return s.slice(0,3);const l=3-s.length,r=f.value.filter(t=>t.slug!==o.currentSlug&&!s.some(h=>h.slug===t.slug)).sort(()=>.5-Math.random()).slice(0,l);return[...s,...r]}),_=s=>{if(s.image)return{backgroundImage:`url(${s.image})`};let l="category-default";if(s.categories&&s.categories.length>0){const r=s.categories[0].toLowerCase();r.includes("dessert")?l="category-dessert":r.includes("bagv√¶rk")?l="category-bagvaerk":r.includes("tradition")?l="category-tradition":r.includes("international")&&(l="category-international")}return{backgroundColor:b(l)}},b=s=>{switch(s){case"category-dessert":return"#f9d5e5";case"category-bagvaerk":return"#eeac99";case"category-tradition":return"#e06377";case"category-international":return"#5b9aa0";default:return"#d8e2dc"}};return(s,l)=>a(i)&&a(i).length>0?(d(),c("div",A,[l[0]||(l[0]=e("h2",{class:"related-title"},"Andre opskrifter du m√•ske vil synes om",-1)),e("div",B,[(d(!0),c(w,null,x(a(i),r=>(d(),c("div",{key:r.slug,class:"related-grid-item"},[e("a",{href:r.slug,class:"recipe-card",onclick:"window.location.href=this.getAttribute('href'); return false;"},[e("div",{class:"recipe-card-image",style:S(_(r))},[e("div",j,n(r.time||"30")+" min",1),r.categories&&r.categories.length>0?(d(),c("div",q,n(r.categories[0]),1)):y("",!0)],4),e("div",z,[e("h3",null,n(r.title),1),e("p",D,n(r.description),1),e("div",L,[e("span",P,n(r.difficulty||"Nem"),1),e("span",E,n(r.servings||"4")+" pers.",1)])])],8,U)]))),128))])])):y("",!0)}},H=I(G,[["__scopeId","data-v-d5454016"]]),J={key:0,class:"loading-container"},K={key:1,class:"error-container"},Y={key:2,class:"recipe-page"},Z={class:"recipe-header"},Q={key:0,class:"pattern-overlay"},W={class:"recipe-header-content"},X={class:"recipe-description"},ee={class:"recipe-meta"},te={class:"meta-item"},ie={class:"meta-item"},re={class:"meta-item"},ae={class:"recipe-content"},se={class:"recipe-columns"},le={class:"recipe-ingredients"},ne={class:"recipe-instructions"},ce={key:0,class:"recipe-tips"},de={__name:"[name]",async setup(k){let g,v;const o=M(),f=o.params.name;console.log("Opskriftsside indl√¶st med params:",o.params);const{data:i,pending:_,error:b}=([g,v]=N(()=>C(`/api/recipe?name=${encodeURIComponent(f)}`,"$15ACNZNMrv")),g=await g,v(),g);console.log("API-svar modtaget:",i.value);const s=()=>i.value&&i.value.image?i.value.image:"https://upload.wikimedia.org/wikipedia/commons/6/6d/Good_Food_Display_-_NCI_Visuals_Online.jpg",l=()=>{if(!i.value||!i.value.body)return{ingredients:[],instructions:[]};const r=i.value.body,t=r.match(/Ingredienser(.*?)(?=Fremgangsm√•de|$)/s),h=r.match(/Fremgangsm√•de(.*?)(?=Tips|$)/s),u=r.match(/Tips(.*?)$/s);let m=[];t&&t[1]&&(m=t[1].trim().replace(/###|##|#/g,"").replace(/\*/g,"").trim().split(/\n|(?:-\s)/).filter(p=>p.trim().length>0).map(p=>p.trim().replace(/^-\s*/,"")));let $=[];h&&h[1]&&($=h[1].trim().replace(/###|##|#/g,"").replace(/\*\*/g,"").trim().split(/\d+\.\s+/).filter(p=>p.trim().length>0).map(p=>p.trim()));let R="";return u&&u[1]&&(R=u[1].trim().replace(/###|##|#/g,"").replace(/\*\*/g,"").trim()),{ingredients:m,instructions:$,tips:R}};return(r,t)=>{const h=H;return d(),c("div",null,[a(_)?(d(),c("div",J,t[0]||(t[0]=[e("div",{class:"loader"},null,-1),e("p",null,"Indl√¶ser opskrift...",-1)]))):a(b)||a(i)&&a(i).error?(d(),c("div",K,[t[1]||(t[1]=e("h2",null,"Opskrift ikke fundet",-1)),e("p",null,'Vi kunne ikke finde opskriften "'+n(a(f))+'". Pr√∏v at v√¶lge en anden opskrift.',1),t[2]||(t[2]=e("a",{href:"/",class:"back-link"},"Tilbage til forsiden",-1))])):a(i)&&!a(i).error?(d(),c("div",Y,[e("div",Z,[e("div",{class:"recipe-image",style:S({backgroundImage:`url(${s()})`})},[!a(i)||!a(i).image||a(i).image===""?(d(),c("div",Q,t[3]||(t[3]=[V('<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" data-v-923a570b><defs data-v-923a570b><pattern id="recipe-checkerboard" x="0" y="0" width="120" height="120" patternUnits="userSpaceOnUse" data-v-923a570b><rect width="20" height="20" x="0" y="0" fill="#c62828" data-v-923a570b></rect><rect width="20" height="20" x="20" y="0" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="40" y="0" fill="#c62828" data-v-923a570b></rect><rect width="20" height="20" x="60" y="0" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="80" y="0" fill="#c62828" data-v-923a570b></rect><rect width="20" height="20" x="100" y="0" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="0" y="20" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="20" y="20" fill="#ffffff" data-v-923a570b></rect><rect width="20" height="20" x="40" y="20" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="60" y="20" fill="#ffffff" data-v-923a570b></rect><rect width="20" height="20" x="80" y="20" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="100" y="20" fill="#ffffff" data-v-923a570b></rect><rect width="20" height="20" x="0" y="40" fill="#c62828" data-v-923a570b></rect><rect width="20" height="20" x="20" y="40" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="40" y="40" fill="#c62828" data-v-923a570b></rect><rect width="20" height="20" x="60" y="40" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="80" y="40" fill="#c62828" data-v-923a570b></rect><rect width="20" height="20" x="100" y="40" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="0" y="60" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="20" y="60" fill="#ffffff" data-v-923a570b></rect><rect width="20" height="20" x="40" y="60" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="60" y="60" fill="#ffffff" data-v-923a570b></rect><rect width="20" height="20" x="80" y="60" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="100" y="60" fill="#ffffff" data-v-923a570b></rect><rect width="20" height="20" x="0" y="80" fill="#c62828" data-v-923a570b></rect><rect width="20" height="20" x="20" y="80" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="40" y="80" fill="#c62828" data-v-923a570b></rect><rect width="20" height="20" x="60" y="80" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="80" y="80" fill="#c62828" data-v-923a570b></rect><rect width="20" height="20" x="100" y="80" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="0" y="100" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="20" y="100" fill="#ffffff" data-v-923a570b></rect><rect width="20" height="20" x="40" y="100" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="60" y="100" fill="#ffffff" data-v-923a570b></rect><rect width="20" height="20" x="80" y="100" fill="#e57373" data-v-923a570b></rect><rect width="20" height="20" x="100" y="100" fill="#ffffff" data-v-923a570b></rect></pattern></defs><rect width="100%" height="100%" fill="url(#recipe-checkerboard)" data-v-923a570b></rect></svg>',1)]))):y("",!0)],4),e("div",W,[e("h1",null,n(a(i).title),1),e("p",X,n(a(i).description),1),e("div",ee,[e("div",te,[t[4]||(t[4]=e("span",{class:"meta-icon"},"‚è±Ô∏è",-1)),e("span",null,n(a(i).time||30)+" minutter",1)]),e("div",ie,[t[5]||(t[5]=e("span",{class:"meta-icon"},"üë®‚Äçüç≥",-1)),e("span",null,n(a(i).difficulty||"Nem"),1)]),e("div",re,[t[6]||(t[6]=e("span",{class:"meta-icon"},"üçΩÔ∏è",-1)),e("span",null,n(a(i).servings||4)+" personer",1)])])])]),e("div",ae,[e("div",se,[e("div",le,[t[7]||(t[7]=e("h2",null,"Ingredienser",-1)),e("ul",null,[(d(!0),c(w,null,x(l().ingredients,(u,m)=>(d(),c("li",{key:m},n(u),1))),128))])]),e("div",ne,[t[9]||(t[9]=e("h2",null,"Fremgangsm√•de",-1)),e("ol",null,[(d(!0),c(w,null,x(l().instructions,(u,m)=>(d(),c("li",{key:m},n(u),1))),128))]),l().tips?(d(),c("div",ce,[t[8]||(t[8]=e("h3",null,"Tips",-1)),e("p",null,n(l().tips),1)])):y("",!0)])])]),O(h,{"current-recipe":a(i),"current-slug":`/opskrifter/${a(f)}`},null,8,["current-recipe","current-slug"]),t[10]||(t[10]=e("div",{class:"button-container"},[e("a",{href:"/",class:"back-button"},"Tilbage til forsiden")],-1))])):y("",!0)])}}},ue=I(de,[["__scopeId","data-v-923a570b"]]);export{ue as default};
