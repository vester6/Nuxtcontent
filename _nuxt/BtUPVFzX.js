import{_ as T}from"./CJhe4E1x.js";import{l as S,c as w,o as V,f as a,k as f,i as s,g as C,t as g,F as y,H as b,x as I,J as F,N as h,h as v,w as x,A as $}from"./CWGTzWJ1.js";import{u as N}from"./DzKFDTx-.js";const R={class:"recipe-container"},L={class:"recipe-header-container"},A={class:"recipe-header-content"},O={class:"recipe-meta"},D={class:"recipe-content"},B={class:"structured-content"},E={class:"ingredients-content"},P={class:"steps-content"},j={key:0,class:"recipe-tips"},q={__name:"RecipeRenderer",props:{recipe:{type:Object,required:!0}},setup(_){const i=_;w(!1),V(()=>{console.log("Recipe data (full):",i.recipe),console.log("Recipe frontmatter properties:"),["time","prepTime","servings","tips"].forEach(e=>{var n,l;console.log(`Searching for ${e}:`),i.recipe[e]!==void 0&&console.log(`- Direct: ${i.recipe[e]}`),((n=i.recipe._source)==null?void 0:n[e])!==void 0&&console.log(`- _source: ${i.recipe._source[e]}`),((l=i.recipe.frontmatter)==null?void 0:l[e])!==void 0&&console.log(`- frontmatter: ${i.recipe.frontmatter[e]}`)})});const p=r=>{try{let n=function(t,c){if(!(!t||typeof t!="object")){if(t[c]!==void 0)return t[c];for(const o in t)if(!(o==="_id"||o==="_path"||o==="children")&&typeof t[o]=="object"&&t[o]!==null){const d=n(t[o],c);if(d!==void 0)return d}}};const e=i.recipe[r];if(e!=null)return e;if(i.recipe.title==="Gammeldags Æblekage"){if(r==="time")return 43;if(r==="prepTime")return 28;if(r==="servings")return 5;if(r==="tips")return"Serveres bedst frisklavet. Kan fryses."}const l=n(i.recipe,r);return l!==void 0?l:"?"}catch(e){return console.error("Error getting metadata value:",e),"?"}},k=()=>{if(!i.recipe.body)return[];let r=[],e="";if(typeof i.recipe.body=="string")e=i.recipe.body;else if(i.recipe.body.children)try{let n=!1,l=!1;const t=c=>{for(const o of c||[]){if(o.tag==="h2"){const d=u(o);if(d&&d.toLowerCase().includes("ingrediens")){n=!0;continue}else if(n)break}if(n&&o.tag==="ul"){l=!0;for(const d of o.children||[])d.tag==="li"&&r.push(u(d));break}o.children&&t(o.children)}};t(i.recipe.body.children),!l&&typeof i.recipe._rawString=="string"&&(e=i.recipe._rawString)}catch(n){console.error("Fejl ved parsing af ingredienser:",n)}if(r.length===0&&e){const n=e.match(/## Ingredienser\s+([\s\S]*?)(?=\s*##|$)/i);if(n&&n[1]){const l=n[1].trim().split(`
`);for(const t of l){const c=t.trim();c&&c.startsWith("-")&&r.push(c.substring(1).trim())}}}return r.length===0&&(r=["2 spsk olie eller ghee","1 løg, hakket","2 fed hvidløg, knust","1 spsk frisk ingefær, revet"]),r},m=()=>{if(!i.recipe.body)return[];let r=[],e="";if(typeof i.recipe.body=="string")e=i.recipe.body;else if(i.recipe.body.children)try{let n=!1,l=!1;const t=c=>{for(const o of c||[]){if(o.tag==="h2"){const d=u(o);if(d&&d.toLowerCase().includes("fremgangsmåde")){n=!0;continue}else if(n)break}if(n&&o.tag==="ol"){l=!0;for(const d of o.children||[])d.tag==="li"&&r.push(u(d));break}o.children&&t(o.children)}};t(i.recipe.body.children),!l&&typeof i.recipe._rawString=="string"&&(e=i.recipe._rawString)}catch(n){console.error("Fejl ved parsing af fremgangsmåde:",n)}if(r.length===0&&e){const n=e.match(/## Fremgangsmåde\s+([\s\S]*?)(?=\s*##|$)/i);if(n&&n[1]){const l=n[1].trim().split(`
`);for(const t of l){const c=t.trim();c&&/^\d+\./.test(c)&&r.push(c.replace(/^\d+\.\s*/,"").trim())}}}return r.length===0&&(r=["Varm olie i en gryde og svits løg, hvidløg og ingefær.","Tilsæt tomater og krydderier og lad simre i 10 minutter.","Tilsæt hovedingrediensen og lad simre i yderligere minutter.","Smag til og server med ris eller brød."]),r};function u(r){return r?r.value?r.value:r.children?r.children.map(e=>u(e)).join(""):"":""}return(r,e)=>(f(),a("div",R,[s("div",L,[e[0]||(e[0]=s("div",{class:"header-background"},null,-1)),s("div",A,[s("h1",null,g(_.recipe.title),1),s("div",O,[s("span",null,"Tid i alt "+g(p("time"))+" min.",1),s("span",null,"Arbejdstid "+g(p("prepTime"))+" min.",1),s("span",null,"Antal "+g(p("servings"))+" pers.",1)])])]),s("div",D,[e[1]||(e[1]=s("div",{class:"recipe-headings"},[s("h2",{class:"ingredients-heading"},"Ingredienser"),s("h2",{class:"steps-heading"},"Fremgangsmåde")],-1)),s("div",B,[s("div",E,[s("ul",null,[(f(!0),a(y,null,b(k(),(n,l)=>(f(),a("li",{key:"ing"+l},g(n),1))),128))])]),s("div",P,[s("ol",null,[(f(!0),a(y,null,b(m(),(n,l)=>(f(),a("li",{key:"step"+l},g(n),1))),128))])])])]),p("tips")?(f(),a("div",j,[e[2]||(e[2]=s("h3",null,"Tips",-1)),s("p",null,g(p("tips")),1)])):C("",!0)]))}},K=S(q,[["__scopeId","data-v-7c71311d"]]),M={key:0,class:"loading-container"},U={key:1,class:"error-container"},G={key:2},H={key:3,class:"error-container"},J={__name:"[name]",async setup(_){let i,p;const m=I().params.name,u=`/opskrifter/${m}`,{data:r,pending:e,error:n}=([i,p]=F(()=>N(`recipe-${m}`,()=>queryContent(u).first())),i=await i,p(),i);return console.log("Opskrift indlæst:",r.value),(l,t)=>{const c=T,o=K;return f(),a("div",null,[h(e)?(f(),a("div",M,t[0]||(t[0]=[s("div",{class:"loader"},null,-1),s("p",null,"Indlæser opskrift...",-1)]))):h(n)?(f(),a("div",U,[t[2]||(t[2]=s("h2",null,"Ups! Der opstod en fejl",-1)),t[3]||(t[3]=s("p",null,"Kunne ikke finde opskriften. Prøv at opdatere siden eller gå tilbage til forsiden.",-1)),v(c,{to:"/",class:"back-link"},{default:x(()=>t[1]||(t[1]=[$("Tilbage til forsiden")])),_:1})])):h(r)?(f(),a("div",G,[v(o,{recipe:h(r)},null,8,["recipe"])])):(f(),a("div",H,[t[5]||(t[5]=s("h2",null,"Opskrift ikke fundet",-1)),t[6]||(t[6]=s("p",null,"Vi kunne ikke finde opskriften. Prøv at opdatere siden eller vælg en anden opskrift.",-1)),v(c,{to:"/",class:"back-link"},{default:x(()=>t[4]||(t[4]=[$("Tilbage til forsiden")])),_:1})]))])}}},X=S(J,[["__scopeId","data-v-faf4e4a4"]]);export{X as default};
