import{l as R,J as l,c as x,o as D,R as N,f as n,k as g,i as r,S as T,g as k,t as c,F as B,H as J,O as j,n as z}from"./DRowYQrR.js";const E=["draggable"],L=["href"],M={class:"time-badge"},P={key:0,class:"category-badge"},K={class:"recipe-card-content"},V={class:"description"},q={class:"recipe-meta"},H={class:"difficulty"},$={class:"servings"},A={key:0,class:"categories"},G={__name:"RecipeCard",props:{recipe:{type:Object,required:!0},draggable:{type:Boolean,default:!1}},emits:["dragstart","favoriteToggled"],setup(a,{emit:y}){const t=a,u=y,b=e=>e.image||e.meta&&e.meta.image?{backgroundImage:`url(${e.image||e.meta.image})`}:{backgroundImage:'url("/almaskoekken.png")'},d=l(()=>{var e;return((e=t.recipe.meta)==null?void 0:e.categories)&&t.recipe.meta.categories.length>0||t.recipe.categories&&t.recipe.categories.length>0}),C=l(()=>{var e;return((e=t.recipe.meta)==null?void 0:e.categories)||t.recipe.categories||[]}),_=l(()=>{var e;return(e=t.recipe.meta)!=null&&e.categories&&t.recipe.meta.categories.length>0?t.recipe.meta.categories[0]:t.recipe.categories&&t.recipe.categories.length>0?t.recipe.categories[0]:""}),i=x([]),o=l(()=>t.recipe._path?t.recipe._path.split("/").pop():t.recipe.slug?t.recipe.slug.split("/").pop():""),p=l(()=>i.value.includes(o.value));D(()=>{S(),console.log("Recipe details:",{id:o.value,path:t.recipe._path,slug:t.recipe.slug,title:t.recipe.title})}),N(()=>i.value,()=>{console.log("Favorites updated:",i.value)},{deep:!0});const S=()=>{try{{const e=localStorage.getItem("almasKokken_favorites");e&&(i.value=JSON.parse(e),console.log("Loaded favorites:",i.value))}}catch(e){console.error("Error loading favorites:",e),i.value=[]}},w=()=>{try{localStorage.setItem("almasKokken_favorites",JSON.stringify(i.value)),console.log("Saved favorites:",i.value)}catch(e){console.error("Error saving favorites:",e)}},I=e=>{if(e.preventDefault(),e.stopPropagation(),console.log("Toggle favorite for:",o.value),!o.value){console.error("Cannot toggle favorite: no recipe ID found");return}if(p.value){const s=i.value.indexOf(o.value);s!==-1&&i.value.splice(s,1)}else i.value.push(o.value);w(),u("favoriteToggled",o.value)},F=e=>{const s=t.recipe._path||t.recipe.slug||"/";window.location.href=s,e.preventDefault()},O=e=>{e.dataTransfer.setData("recipe",JSON.stringify(t.recipe)),u("dragstart",e,t.recipe)};return(e,s)=>{var v,f,m;return g(),n("div",{class:"recipe-card-container",draggable:a.draggable,onDragstart:O},[r("a",{href:a.recipe._path||a.recipe.slug||"/",class:"recipe-card",onClick:F},[r("div",{class:"recipe-card-image",style:T(b(a.recipe))},[r("div",M,c(((v=a.recipe.meta)==null?void 0:v.time)||a.recipe.time||"?")+" min",1),d.value?(g(),n("div",P,c(_.value),1)):k("",!0)],4),r("div",K,[r("h3",null,c(a.recipe.title||"Opskrift"),1),r("p",V,c(a.recipe.description||"Ingen beskrivelse tilgængelig"),1),r("div",q,[r("span",H,c(((f=a.recipe.meta)==null?void 0:f.difficulty)||a.recipe.difficulty||"Nem"),1),r("span",$,c(((m=a.recipe.meta)==null?void 0:m.servings)||a.recipe.servings||"4")+" pers.",1)]),d.value?(g(),n("div",A,[(g(!0),n(B,null,J(C.value,h=>(g(),n("span",{key:h,class:"category-tag"},c(h),1))),128))])):k("",!0)])],8,L),r("button",{class:z(["favorite-btn",{active:p.value}]),onClick:j(I,["stop"]),"aria-label":"Tilføj til favoritter"},s[0]||(s[0]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},[r("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),2)],40,E)}}},U=Object.assign(R(G,[["__scopeId","data-v-c9d11445"]]),{__name:"RecipeCard"});export{U as R};
