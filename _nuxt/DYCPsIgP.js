import{R as k}from"./-YyKRVH6.js";import{l as _,c as i,o as m,R as F,f as r,i as o,t as h,F as y,H as R,k as s,N as w}from"./DRowYQrR.js";const I={class:"favorites-page"},S={key:0,class:"loading-container"},B={key:1,class:"error-container"},T={key:2,class:"empty-favorites"},$={key:3,class:"favorites-grid"},b={__name:"favoritter",setup(j){const n=i([]),l=i([]),c=i([]),v=i(!0),u=i(null),f=()=>{try{{const e=localStorage.getItem("almasKokken_favorites");e&&(l.value=JSON.parse(e),console.log("Loaded favorites:",l.value))}}catch(e){console.error("Fejl ved indlæsning af favoritter:",e),l.value=[]}},p=async()=>{try{v.value=!0;const e=await fetch("/api/recipes");if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const t=await e.json();console.log("Fetched recipes:",t),c.value=t||[]}catch(e){console.error("Fejl ved hentning af opskrifter:",e),u.value=e.message,c.value=[]}finally{v.value=!1}},d=()=>{console.log("Filtering favorites. Favorites:",l.value),console.log("All recipes:",c.value),n.value=c.value.filter(e=>{let t="";e._path?t=e._path.split("/").pop():e.slug&&(t=e.slug.split("/").pop());const a=t&&l.value.includes(t);return console.log(`Recipe ${e.title} (${t}): ${a?"is favorite":"not favorite"}`),a}),console.log("Filtered favorite recipes:",n.value)},g=e=>{console.log("Favorite toggled for:",e),f(),d()};return m(async()=>{f(),await p(),d(),v.value=!1}),F(()=>localStorage.getItem("almasKokken_favorites"),()=>{f(),d()},{immediate:!0}),(e,t)=>(s(),r("div",I,[t[3]||(t[3]=o("h1",{class:"page-title"},"Mine Favoritter",-1)),v.value?(s(),r("div",S,t[0]||(t[0]=[o("div",{class:"loader"},null,-1),o("p",null,"Indlæser favoritter...",-1)]))):u.value?(s(),r("div",B,[t[1]||(t[1]=o("h2",null,"Kunne ikke indlæse opskrifter",-1)),o("p",null,h(u.value),1),o("button",{onClick:p,class:"retry-btn"},"Prøv igen")])):n.value.length?(s(),r("div",$,[(s(!0),r(y,null,R(n.value,a=>(s(),w(k,{key:a._path||a.slug,recipe:a,onFavoriteToggled:g},null,8,["recipe"]))),128))])):(s(),r("div",T,t[2]||(t[2]=[o("p",null,"Du har ikke markeret nogen opskrifter som favoritter endnu.",-1),o("a",{href:"/",class:"browse-link"},"Udforsk opskrifter",-1)])))]))}},N=_(b,[["__scopeId","data-v-8cf14fa6"]]);export{N as default};
