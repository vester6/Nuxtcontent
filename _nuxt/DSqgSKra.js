import{u as C}from"./CTJj6QqR.js";import{l as I,J as N,K as F,f as c,g as y,N as a,k as d,i as e,F as x,H as k,O as S,t as n,x as M,h as O,U as V}from"./Jfa0KLRP.js";import"./5WPk9I02.js";import"./BmL9ck2M.js";const A={key:0,class:"related-recipes"},B={class:"related-grid"},U=["href"],j={class:"time-badge"},q={key:0,class:"category-badge"},z={class:"recipe-card-content"},D={class:"description"},L={class:"recipe-meta"},P={class:"difficulty"},E={class:"servings"},G={__name:"RelatedRecipes",props:{currentRecipe:{type:Object,required:!0},currentSlug:{type:String,required:!0}},async setup(b){let f,v;const o=b,{data:g}=([f,v]=N(()=>C("/api/recipes","$YTe4cnvzd6")),f=await f,v(),f),r=F(()=>{if(!g.value||!o.currentRecipe)return[];if(!o.currentRecipe.categories||o.currentRecipe.categories.length===0)return g.value.filter(t=>t.slug!==o.currentSlug).sort(()=>.5-Math.random()).slice(0,3);const s=g.value.filter(t=>t.slug===o.currentSlug||!t.categories||t.categories.length===0?!1:t.categories.some(h=>o.currentRecipe.categories.includes(h)));if(s.length>=3)return s.slice(0,3);const l=3-s.length,i=g.value.filter(t=>t.slug!==o.currentSlug&&!s.some(h=>h.slug===t.slug)).sort(()=>.5-Math.random()).slice(0,l);return[...s,...i]}),_=s=>{if(s.image)return{backgroundImage:`url(${s.image})`};let l="category-default";if(s.categories&&s.categories.length>0){const i=s.categories[0].toLowerCase();i.includes("dessert")?l="category-dessert":i.includes("bagv√¶rk")?l="category-bagvaerk":i.includes("tradition")?l="category-tradition":i.includes("international")&&(l="category-international")}return{backgroundColor:w(l)}},w=s=>{switch(s){case"category-dessert":return"#f9d5e5";case"category-bagvaerk":return"#eeac99";case"category-tradition":return"#e06377";case"category-international":return"#5b9aa0";default:return"#d8e2dc"}};return(s,l)=>a(r)&&a(r).length>0?(d(),c("div",A,[l[0]||(l[0]=e("h2",{class:"related-title"},"Andre opskrifter du m√•ske vil synes om",-1)),e("div",B,[(d(!0),c(x,null,k(a(r),i=>(d(),c("div",{key:i.slug,class:"related-grid-item"},[e("a",{href:i.slug,class:"recipe-card",onclick:"window.location.href=this.getAttribute('href'); return false;"},[e("div",{class:"recipe-card-image",style:S(_(i))},[e("div",j,n(i.time||"30")+" min",1),i.categories&&i.categories.length>0?(d(),c("div",q,n(i.categories[0]),1)):y("",!0)],4),e("div",z,[e("h3",null,n(i.title),1),e("p",D,n(i.description),1),e("div",L,[e("span",P,n(i.difficulty||"Nem"),1),e("span",E,n(i.servings||"4")+" pers.",1)])])],8,U)]))),128))])])):y("",!0)}},H=I(G,[["__scopeId","data-v-d5454016"]]),J={key:0,class:"loading-container"},K={key:1,class:"error-container"},Y={key:2,class:"recipe-page"},Z={class:"recipe-header"},Q={class:"recipe-header-content"},W={class:"recipe-description"},X={class:"recipe-meta"},ee={class:"meta-item"},te={class:"meta-item"},ie={class:"meta-item"},re={class:"recipe-content"},ae={class:"recipe-columns"},se={class:"recipe-ingredients"},le={class:"recipe-instructions"},ne={key:0,class:"recipe-tips"},ce={__name:"[name]",async setup(b){let f,v;const o=M(),g=o.params.name;console.log("Opskriftsside indl√¶st med params:",o.params);const{data:r,pending:_,error:w}=([f,v]=N(()=>C(`/api/recipe?name=${encodeURIComponent(g)}`,"$15ACNZNMrv")),f=await f,v(),f);console.log("API-svar modtaget:",r.value);const s=()=>r.value&&r.value.image?r.value.image:"https://upload.wikimedia.org/wikipedia/commons/6/6d/Good_Food_Display_-_NCI_Visuals_Online.jpg",l=()=>{if(!r.value||!r.value.body)return{ingredients:[],instructions:[]};const i=r.value.body,t=i.match(/Ingredienser(.*?)(?=Fremgangsm√•de|$)/s),h=i.match(/Fremgangsm√•de(.*?)(?=Tips|$)/s),u=i.match(/Tips(.*?)$/s);let m=[];t&&t[1]&&(m=t[1].trim().replace(/###|##|#/g,"").replace(/\*/g,"").trim().split(/\n|(?:-\s)/).filter(p=>p.trim().length>0).map(p=>p.trim().replace(/^-\s*/,"")));let $=[];h&&h[1]&&($=h[1].trim().replace(/###|##|#/g,"").replace(/\*\*/g,"").trim().split(/\d+\.\s+/).filter(p=>p.trim().length>0).map(p=>p.trim()));let R="";return u&&u[1]&&(R=u[1].trim().replace(/###|##|#/g,"").replace(/\*\*/g,"").trim()),{ingredients:m,instructions:$,tips:R}};return(i,t)=>{const h=H;return d(),c("div",null,[a(_)?(d(),c("div",J,t[0]||(t[0]=[e("div",{class:"loader"},null,-1),e("p",null,"Indl√¶ser opskrift...",-1)]))):a(w)||a(r)&&a(r).error?(d(),c("div",K,[t[1]||(t[1]=e("h2",null,"Opskrift ikke fundet",-1)),e("p",null,'Vi kunne ikke finde opskriften "'+n(a(g))+'". Pr√∏v at v√¶lge en anden opskrift.',1),t[2]||(t[2]=e("a",{href:"/",class:"back-link"},"Tilbage til forsiden",-1))])):a(r)&&!a(r).error?(d(),c("div",Y,[e("div",Z,[e("div",{class:"recipe-image",style:S({backgroundImage:`url(${s()})`})},t[3]||(t[3]=[V('<div class="pattern-overlay" data-v-fe13a5e7><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" data-v-fe13a5e7><defs data-v-fe13a5e7><pattern id="recipe-checkerboard" x="0" y="0" width="120" height="120" patternUnits="userSpaceOnUse" data-v-fe13a5e7><rect width="20" height="20" x="0" y="0" fill="#c62828" data-v-fe13a5e7></rect><rect width="20" height="20" x="20" y="0" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="40" y="0" fill="#c62828" data-v-fe13a5e7></rect><rect width="20" height="20" x="60" y="0" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="80" y="0" fill="#c62828" data-v-fe13a5e7></rect><rect width="20" height="20" x="100" y="0" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="0" y="20" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="20" y="20" fill="#ffffff" data-v-fe13a5e7></rect><rect width="20" height="20" x="40" y="20" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="60" y="20" fill="#ffffff" data-v-fe13a5e7></rect><rect width="20" height="20" x="80" y="20" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="100" y="20" fill="#ffffff" data-v-fe13a5e7></rect><rect width="20" height="20" x="0" y="40" fill="#c62828" data-v-fe13a5e7></rect><rect width="20" height="20" x="20" y="40" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="40" y="40" fill="#c62828" data-v-fe13a5e7></rect><rect width="20" height="20" x="60" y="40" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="80" y="40" fill="#c62828" data-v-fe13a5e7></rect><rect width="20" height="20" x="100" y="40" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="0" y="60" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="20" y="60" fill="#ffffff" data-v-fe13a5e7></rect><rect width="20" height="20" x="40" y="60" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="60" y="60" fill="#ffffff" data-v-fe13a5e7></rect><rect width="20" height="20" x="80" y="60" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="100" y="60" fill="#ffffff" data-v-fe13a5e7></rect><rect width="20" height="20" x="0" y="80" fill="#c62828" data-v-fe13a5e7></rect><rect width="20" height="20" x="20" y="80" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="40" y="80" fill="#c62828" data-v-fe13a5e7></rect><rect width="20" height="20" x="60" y="80" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="80" y="80" fill="#c62828" data-v-fe13a5e7></rect><rect width="20" height="20" x="100" y="80" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="0" y="100" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="20" y="100" fill="#ffffff" data-v-fe13a5e7></rect><rect width="20" height="20" x="40" y="100" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="60" y="100" fill="#ffffff" data-v-fe13a5e7></rect><rect width="20" height="20" x="80" y="100" fill="#e57373" data-v-fe13a5e7></rect><rect width="20" height="20" x="100" y="100" fill="#ffffff" data-v-fe13a5e7></rect></pattern></defs><rect width="100%" height="100%" fill="url(#recipe-checkerboard)" data-v-fe13a5e7></rect></svg></div>',1)]),4),e("div",Q,[e("h1",null,n(a(r).title),1),e("p",W,n(a(r).description),1),e("div",X,[e("div",ee,[t[4]||(t[4]=e("span",{class:"meta-icon"},"‚è±Ô∏è",-1)),e("span",null,n(a(r).time||30)+" minutter",1)]),e("div",te,[t[5]||(t[5]=e("span",{class:"meta-icon"},"üë®‚Äçüç≥",-1)),e("span",null,n(a(r).difficulty||"Nem"),1)]),e("div",ie,[t[6]||(t[6]=e("span",{class:"meta-icon"},"üçΩÔ∏è",-1)),e("span",null,n(a(r).servings||4)+" personer",1)])])])]),e("div",re,[e("div",ae,[e("div",se,[t[7]||(t[7]=e("h2",null,"Ingredienser",-1)),e("ul",null,[(d(!0),c(x,null,k(l().ingredients,(u,m)=>(d(),c("li",{key:m},n(u),1))),128))])]),e("div",le,[t[9]||(t[9]=e("h2",null,"Fremgangsm√•de",-1)),e("ol",null,[(d(!0),c(x,null,k(l().instructions,(u,m)=>(d(),c("li",{key:m},n(u),1))),128))]),l().tips?(d(),c("div",ne,[t[8]||(t[8]=e("h3",null,"Tips",-1)),e("p",null,n(l().tips),1)])):y("",!0)])])]),O(h,{"current-recipe":a(r),"current-slug":`/opskrifter/${a(g)}`},null,8,["current-recipe","current-slug"]),t[10]||(t[10]=e("div",{class:"button-container"},[e("a",{href:"/",class:"back-button"},"Tilbage til forsiden")],-1))])):y("",!0)])}}},ge=I(ce,[["__scopeId","data-v-fe13a5e7"]]);export{ge as default};
